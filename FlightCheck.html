<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#ffffff">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="FlightCheck">
<link rel="manifest" href="manifest.json">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CSS VARIABLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:           #f4f4f4;
  --surface:      #ffffff;
  --surface-2:    #f0f0f0;
  --border:       #e0e0e0;
  --border-dark:  #c8c8c8;
  --text:         #1a1a1a;
  --text-mid:     #555555;
  --text-dim:     #999999;
  --accent-b:     #1a6fe8;
  --accent-a:     #d95f2b;
  --green:        #2e9e5b;
  --green-light:  #eaf6ee;
  --green-border: #a8d9b8;
  --red:          #cc3333;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  min-height: 100vh;
  font-size: 15px;
  line-height: 1.4;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.screen {
  display: none;
  min-height: 100vh;
  flex-direction: column;
}

.screen.active {
  display: flex;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-home {
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  background: var(--surface);
}

.logo-area {
  text-align: center;
  margin-bottom: 48px;
}

.logo-icon {
  font-size: 52px;
  display: block;
  margin-bottom: 14px;
}

.logo-title {
  font-size: 26px;
  font-weight: 700;
  color: var(--text);
  letter-spacing: 0.5px;
}

.logo-sub {
  font-size: 13px;
  color: var(--text-dim);
  margin-top: 5px;
}

/* Aircraft buttons */
.aircraft-btns {
  display: flex;
  flex-direction: column;
  gap: 14px;
  width: 100%;
  max-width: 340px;
}

.ac-btn {
  border: none;
  background: none;
  cursor: pointer;
  padding: 0;
  border-radius: 10px;
  width: 100%;
}

.ac-btn-inner {
  display: flex;
  align-items: center;
  gap: 18px;
  padding: 20px 22px;
  border-radius: 10px;
  border: 1.5px solid var(--border);
  background: var(--surface);
  transition: background 0.15s;
  position: relative;
}

.ac-btn:active .ac-btn-inner {
  background: var(--surface-2);
}

.ac-btn.b737 .ac-btn-inner {
  border-left: 5px solid var(--accent-b);
}

.ac-btn.a320 .ac-btn-inner {
  border-left: 5px solid var(--accent-a);
}

.ac-icon {
  font-size: 36px;
  line-height: 1;
}

.ac-info {
  text-align: left;
}

.ac-type {
  font-size: 22px;
  font-weight: 700;
}

.ac-btn.b737 .ac-type { color: var(--accent-b); }
.ac-btn.a320 .ac-type { color: var(--accent-a); }

.ac-name {
  font-size: 12px;
  color: var(--text-dim);
  margin-top: 3px;
}

/* Corner decorations not needed in plain style */
.corner { display: none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED TOP BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.top-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
  position: sticky;
  top: 0;
  z-index: 10;
}

.back-btn {
  background: none;
  border: 1.5px solid var(--border-dark);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 500;
  padding: 7px 14px;
  border-radius: 7px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
  transition: background 0.15s;
}

.back-btn:active {
  background: var(--surface-2);
}

.top-bar-title {
  flex: 1;
  font-size: 17px;
  font-weight: 700;
  color: var(--text);
}

.top-bar-title.b737 { color: var(--accent-b); }
.top-bar-title.a320 { color: var(--accent-a); }

.reset-btn {
  background: none;
  border: 1.5px solid var(--border-dark);
  color: var(--red);
  font-family: 'Inter', sans-serif;
  font-size: 13px;
  font-weight: 500;
  padding: 7px 13px;
  border-radius: 7px;
  cursor: pointer;
  transition: background 0.15s;
}

.reset-btn:active {
  background: #fff0f0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MENU SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-menu {
  padding: 0;
  background: var(--bg);
}

.menu-list {
  padding: 14px;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.menu-item {
  position: relative;
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 16px 18px;
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: background 0.15s;
  overflow: hidden;
}

.menu-item:active {
  background: var(--surface-2);
}

.menu-item.completed {
  border-color: var(--green-border);
  background: var(--green-light);
}

.menu-item-num {
  font-size: 12px;
  color: var(--text-dim);
  min-width: 24px;
  font-weight: 500;
}

.menu-item-name {
  flex: 1;
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
}

.menu-item.completed .menu-item-name {
  color: var(--green);
}

.menu-item-progress {
  font-size: 13px;
  color: var(--text-dim);
  font-weight: 500;
}

.menu-item.completed .menu-item-progress {
  color: var(--green);
}

.menu-item-arrow {
  color: var(--text-dim);
  font-size: 16px;
}

.check-badge {
  font-size: 18px;
  display: none;
}

.menu-item.completed .check-badge     { display: block; }
.menu-item.completed .menu-item-arrow { display: none; }

/* Thin progress strip at bottom of each menu item */
.menu-item-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  background: var(--green);
  transition: width 0.3s ease;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHECKLIST SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-checklist {
  padding: 0;
  background: var(--bg);
}

.checklist-header {
  padding: 12px 16px 10px;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
  position: sticky;
  top: 0;
  z-index: 10;
}

.cl-title {
  font-size: 16px;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 2px;
}

.cl-subtitle {
  font-size: 12px;
  color: var(--text-dim);
  font-weight: 500;
}

.cl-list {
  padding: 12px 14px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.cl-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: 9px;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}

.cl-item:active {
  background: var(--surface-2);
}

/* Checked â€” green highlight, NO strikethrough */
.cl-item.checked {
  background: var(--green-light);
  border-color: var(--green-border);
}

.cl-checkbox {
  width: 26px;
  height: 26px;
  border: 2px solid var(--border-dark);
  border-radius: 6px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
  font-size: 15px;
  background: var(--surface);
}

.cl-item.checked .cl-checkbox {
  border-color: var(--green);
  background: var(--green);
  color: #fff;
}

.cl-item-content {
  flex: 1;
}

.cl-item-action {
  font-size: 15px;
  font-weight: 600;
  color: var(--text);
}

/* Checked â€” just dim slightly, no strikethrough */
.cl-item.checked .cl-item-action {
  color: var(--text-mid);
}

.cl-item-value {
  font-size: 13px;
  color: var(--text-mid);
  margin-top: 2px;
  font-weight: 500;
}

.cl-item.checked .cl-item-value {
  color: var(--text-dim);
}

/* All-done banner */
.all-done-banner {
  margin: 14px;
  padding: 18px;
  border: 1.5px solid var(--green-border);
  border-radius: 10px;
  background: var(--green-light);
  text-align: center;
  display: none;
}

.all-done-banner.show {
  display: block;
}

.all-done-icon {
  font-size: 32px;
  margin-bottom: 6px;
}

.all-done-text {
  font-size: 15px;
  font-weight: 700;
  color: var(--green);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATUS FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.status-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--surface);
  border-top: 1px solid var(--border);
  padding: 10px 18px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  color: var(--text-dim);
  font-weight: 500;
  z-index: 10;
}

.status-progress-bar {
  position: absolute;
  top: 0;
  left: 0;
  height: 3px;
  background: var(--green);
  transition: width 0.3s ease;
}

/* Spacer so content clears the fixed footer */
.pb {
  margin-bottom: 56px;
}

.cl-btn-row {
  display: flex;
  gap: 10px;
  margin: 8px 14px 16px;
}

.cl-back-btn, .cl-next-btn {
  flex: 1;
  padding: 18px;
  background: none;
  border: 1.5px solid var(--border-dark);
  border-radius: 10px;
  color: var(--text);
  font-family: 'Inter', sans-serif;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
  text-align: center;
}

.cl-back-btn:active, .cl-next-btn:active {
  background: var(--surface-2);
}

.cl-reset-color {
  color: var(--red);
  border-color: var(--red);
}

.cl-btn-disabled {
  opacity: 0.35;
  cursor: not-allowed;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME TOGGLE BUTTON (home screen)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.theme-toggle {
  background: none;
  border: 1.5px solid var(--border-dark);
  color: var(--text-mid);
  font-family: 'Inter', sans-serif;
  font-size: 13px;
  font-weight: 500;
  padding: 8px 16px;
  border-radius: 20px;
  cursor: pointer;
  margin-bottom: 28px;
  transition: background 0.15s;
}

.theme-toggle:active {
  background: var(--surface-2);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DARK THEME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
html.dark {
  --bg:           #111111;
  --surface:      #1e1e1e;
  --surface-2:    #2a2a2a;
  --border:       #333333;
  --border-dark:  #444444;
  --text:         #f0f0f0;
  --text-mid:     #aaaaaa;
  --text-dim:     #666666;
  --accent-b:     #4a90e8;
  --accent-a:     #e8763a;
  --green:        #3dba6e;
  --green-light:  #1a2e22;
  --green-border: #2a5c3a;
  --red:          #e05555;
}

</style>
<title>FlightCheck</title>
</head>
<body>

<!-- HOME -->
<div id="screen-home" class="screen active">
  <div class="logo-area">
    <span class="logo-icon">âœˆ</span>
    <div class="logo-title">FLIGHTCHECK</div>
    <div class="logo-sub">Cockpit Checklist System</div>
  </div>
  <button class="theme-toggle" id="theme-toggle" onclick="toggleTheme()">ğŸŒ™ Dark mode</button>
  <div class="aircraft-btns">
    <button class="ac-btn b737" onclick="selectAircraft('B737')">
      <div class="ac-btn-inner">
        <span class="corner tl"></span>
        <span class="corner tr"></span>
        <span class="corner bl"></span>
        <span class="corner br"></span>
        <div class="ac-icon"><img src="boeing.png" alt="" width="60" height="49"></div>
        <div class="ac-info">
          <div class="ac-type">B737</div>
          <div class="ac-name">BOEING 737 Â· NORMAL PROCEDURES</div>
        </div>
      </div>
    </button>
    <button class="ac-btn a320" onclick="selectAircraft('A320')">
      <div class="ac-btn-inner">
        <span class="corner tl"></span>
        <span class="corner tr"></span>
        <span class="corner bl"></span>
        <span class="corner br"></span>
        <div class="ac-icon"><img src="airbus.png" alt="" width="60" height="49"></div>
        <div class="ac-info">
          <div class="ac-type">A320</div>
          <div class="ac-name">AIRBUS A320 Â· NORMAL PROCEDURES</div>
        </div>
      </div>
    </button>
  </div>
</div>

<!-- MENU -->
<div id="screen-menu" class="screen">
  <div class="top-bar">
    <button class="back-btn" onclick="goHome()">â—€ HOME</button>
    <div class="top-bar-title" id="menu-title">B737</div>
    <button class="reset-btn" onclick="resetAll()">âŸ³ RESET</button>
  </div>
  <div class="menu-list" id="menu-list"></div>
</div>

<!-- CHECKLIST -->
<div id="screen-checklist" class="screen">
  <div class="checklist-header">
    <div class="top-bar" style="padding: 0; border: none; background: none; position: relative; margin-bottom: 4px;">
      <button class="back-btn" onclick="goMenu()">â—€ BACK</button>
      <div class="cl-title" id="cl-title">PREFLIGHT</div>
    </div>
    <div class="cl-subtitle" id="cl-subtitle">B737 Â· 0 / 0 COMPLETE</div>
  </div>
  <div class="cl-list pb" id="cl-list"></div>
  <div class="all-done-banner" id="all-done-banner">
    <div class="all-done-icon">âœ…</div>
    <div class="all-done-text">CHECKLIST COMPLETE</div>
  </div>
  <div class="status-footer">
    <div class="status-progress-bar" id="cl-progress-bar"></div>
    <span id="cl-footer-left">0 / 0 ITEMS</span>
    <span id="cl-footer-right">IN PROGRESS</span>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CHECKLIST DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CHECKLISTS = {
  B737: {
    label: 'B737',
    color: '#2a7fff',
    checklists: [
      {
        id: 'preflight',
        name: 'PREFLIGHT',
        items: [
          { action: 'OXYGEN', value: '100%, NORMAL' },
          { action: 'NAVIGATION TRANSFER SWITCH', value: 'NORMAL' },
          { action: 'YAW DAMPER', value: 'ON' },
          { action: 'EMERGENCY EXIT LIGHTS', value: 'ARMED' },
          { action: 'WINDOWS HEAT', value: 'ON' },
          { action: 'PRESSURISATION', value: 'AUTO' },
          { action: 'FLIGHT INSTRUMENTS', value: 'HDG___, ALT___' },
          { action: 'PARKING BRAKE', value: 'SET' },
          { action: 'ENG START LEVERS', value: 'CUTOFF' },
        ]
      },
      {
        id: 'before_start',
        name: 'BEFORE START',
        items: [
          { action: 'FLIGHT DECK DOOR', value: 'CLOSED & LOCKED' },
          { action: 'FUEL', value: '___LBS/KGS, PUMPS ON' },
          { action: 'PASSENGER SIGNS', value: 'ON' },
          { action: 'WINDOWS', value: 'CLOSED & LOCKED' },
          { action: 'MCP', value: 'V2___, HDG___, ALT___' },
          { action: 'TAKEOFF SPEEDS', value: 'V1___, V2___, VR___' },
          { action: 'CDU PREFLIGHT', value: 'COMPLETED' },
          { action: 'RUDDER & AILERON TRIM', value: 'ZERO' },
          { action: 'TAXI AND TAKEOFF BRIEFING', value: 'COMPLETED' },
          { action: 'ANTI-COLLISION LIGHT', value: 'ON' },
        ]
      },
      {
        id: 'before_taxi',
        name: 'BEFORE TAXI',
        items: [
          { action: 'GENERATORS', value: 'ON' },
          { action: 'PROBEHEAT', value: 'ON' },
          { action: 'ANTI-ICE', value: '___' },
          { action: 'ISOLATION VALVE', value: 'AUTO / CLOSED' },
          { action: 'ENG START SWITCHES', value: 'CONTINUOUS' },
          { action: 'PRESSURIZATION', value: 'PACKS ON, FLT, AUTO' },
          { action: 'AUTOTHROTTLE', value: 'ARMED' },
          { action: 'RECALL', value: 'CHECKED' },
          { action: 'AUTOBRAKE', value: 'RTO' },
          { action: 'FLIGHT CONTROLS', value: 'CHECKED' },
          { action: 'GROUND EQUIPMENT', value: 'CLEARED, HAND SIGNAL' },
          { action: 'USED FUEL', value: 'RESET' },
        ]
      },
      {
        id: 'before_takeoff',
        name: 'BEFORE TAKEOFF',
        items: [
          { action: 'FLAPS', value: '___, GREEN LIGHT' },
          { action: 'STABILIZER', value: '___UNITS' },
          { action: 'PACKS', value: 'AS REQUIRED' },
          { action: 'TRANSPONDER', value: 'TA/RA' },
          { action: 'CABIN CREW', value: 'READY' },
          { action: 'USED FUEL', value: 'RESET' },
          { action: 'TO CONFIG', value: 'CHECKED' },
        ]
      },
      {
        id: 'after_takeoff',
        name: 'AFTER TAKEOFF / CLIMB',
        items: [
          { action: 'ENGINE BLEEDS', value: 'ON' },
          { action: 'PACKS', value: 'AUTO' },
          { action: 'LANDING GEAR', value: 'UP & OFF' },
          { action: 'FLAPS', value: 'UP, NO LIGHTS' },
          { action: 'AUTOBRAKE', value: 'OFF' },
          { action: 'ALTIMETER', value: 'STANDART' },
        ]
      },
      {
        id: 'descent',
        name: 'DESCENT',
        items: [
          { action: 'PRESSURIZATION', value: 'SET ____' },
          { action: 'RECALL', value: 'CHECKED' },
          { action: 'ALTIMETERS', value: 'QNH ____' },
          { action: 'APPROACH BRIEFING', value: 'COMPLETE' },
          { action: 'ANTI-ICE', value: 'AS REQUIRED' },
          { action: 'LANDING DATA', value: 'V-SPEEDS SET' },
        ]
      },
      {
        id: 'approach',
        name: 'APPROACH',
        items: [
          { action: 'ALTIMETER', value: '___' },
        ]
      },
      {
        id: 'landing',
        name: 'LANDING',
        items: [
          { action: 'ENGINE START SWITCHES', value: 'CONT' },
          { action: 'SPEEDBRAKE', value: 'ARMED' },
          { action: 'LANDING GEAR', value: 'DOWN, 3 GREEN' },
          { action: 'FLAPS', value: 'SET ___, GREEN LIGHT' },
          { action: 'GO-AROUND ALTITUDE', value: 'SET' },
        ]
      },
      {
        id: 'after_landing',
        name: 'AFTER LANDING',
        items: [
          { action: 'TRANSPONDER', value: 'STBY' },
          { action: 'WEATHER RADAR', value: 'OFF' },
        ]
      },
      {
        id: 'shutdown',
        name: 'SHUTDOWN',
        items: [
          { action: 'FUEL PUMPS', value: 'OFF' },
          { action: 'PROBEHEAT', value: 'OFF' },
          { action: 'HYDRAULIC PANEL', value: 'SET' },
          { action: 'FLAPS', value: 'UP' },
          { action: 'PARKING BRAKE', value: 'RELEASED / SET TO PARK' },
          { action: 'ENGINE START LEVERS', value: 'CUTOFF' },
        ]
      },
      {
        id: 'secure',
        name: 'SECURE',
        items: [
          { action: 'IRSs', value: 'OFF' },
          { action: 'EMERGENCY LIGHTS', value: 'OFF' },
          { action: 'WINDOWS HEAT', value: 'OFF' },
          { action: 'PACKS', value: 'OFF' },
        ]
      },
    ]
  },

  A320: {
    label: 'A320',
    color: '#ff6b35',
    checklists: [
      {
        id: 'cockpit_prep',
        name: 'COCKPIT PREPARATION',
        items: [
          { action: 'GEAR PINS & COVERS', value: 'REMOVED' },
          { action: 'FUEL QUANTITY', value: '___KG/LB' },
          { action: 'SEAT BELTS', value: 'ON' },
          { action: 'ADIRS', value: 'NAV' },
          { action: 'BARO REF', value: '___(BOTH)' },
        ]
      },
      {
        id: 'before_start',
        name: 'BEFORE START',
        items: [
          { action: 'PARKING BRAKE', value: '___' },
          { action: 'T.O. SPEEDS & THRUST', value: '___(BOTH' },
          { action: 'WINDOWS', value: 'CLOSED (BOTH)' },
          { action: 'BEACON', value: 'ON' },
        ]
      },
      {
        id: 'after_start',
        name: 'AFTER START',
        items: [
          { action: 'ANTI-ICE', value: '___' },
          { action: 'ECAM STATUS', value: 'CHECKED' },
          { action: 'PITCH TRIM', value: '___%' },
          { action: 'RUDDER TRIM', value: 'NEUTRAL' },
        ]
      },
      {
        id: 'taxi',
        name: 'TAXI',
        items: [
          { action: 'FLIGHT CONTROLS', value: 'CHECKED (BOTH)' },
          { action: 'FLAPS SETTING', value: 'CONF___(BOTH)' },
          { action: 'RADAR & PWS', value: 'ON & AUTO' },
          { action: 'ENG MODE SEL', value: '___' },
          { action: 'ECAM MEMO', value: 'T.O NO BLUE' },
        ]
      },
      {
        id: 'lineup',
        name: 'LINEUP',
        items: [
          { action: 'T.O RWY', value: '___(BOTH)' },
          { action: 'TCAS', value: 'TA/RA' },
          { action: 'PACKS 1 & 2', value: 'AS REQUIRED' },
        ]
      },
      {
        id: 'approach',
        name: 'APPROACH',
        items: [
          { action: 'BARO REF', value: '___SET (BOTH)' },
          { action: 'SEAT BELTS', value: 'ON' },
          { action: 'MINIMUM', value: '___' },
          { action: 'AUTOBRAKE', value: '___' },
          { action: 'ENG MODE SEL', value: '___' },
        ]
      },
      {
        id: 'landing',
        name: 'LANDING',
        items: [
          { action: 'GO-AROUND ALT', value: '___FT SET' },
          { action: 'CABIN CREW', value: 'ADVISED' },
          { action: 'ECAM MEMO', value: 'LDG NO BLUE' },
        ]
      },
      {
        id: 'after-landing',
        name: 'AFTER-LANDING',
        items: [
          { action: 'RADAR & PWS', value: 'OFF' },
        ]
      },
      {
        id: 'parking',
        name: 'PARKING',
        items: [
          { action: 'PARK BRK or CHOCKS', value: 'SET' },
          { action: 'ENGINES', value: 'OFF' },
          { action: 'WING LIGHTS', value: 'OFF' },
          { action: 'FUEL PUMPS', value: 'OFF' },
        ]
      },
      {
        id: 'securing the aircraft',
        name: 'SECURING THE AIRCRAFT',
        items: [
          { action: 'OXYGEN', value: 'OFF' },
          { action: 'EMER EXIT LT', value: 'OFF' },
          { action: 'EFBs', value: 'OFF' },
          { action: 'BATTERIES', value: 'OFF' },
        ]
      },
    ]
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentAC = null;
let currentCL = null;
// state[AC][checklistId][itemIndex] = bool
let state = { B737: {}, A320: {} };

function initState() {
  for (const ac in CHECKLISTS) {
    for (const cl of CHECKLISTS[ac].checklists) {
      if (!state[ac][cl.id]) state[ac][cl.id] = {};
    }
  }
}
initState();

function saveState() {
  try { localStorage.setItem('fc_state', JSON.stringify(state)); } catch(e) {}
}

function loadState() {
  try {
    const s = localStorage.getItem('fc_state');
    if (s) state = JSON.parse(s);
    initState();
  } catch(e) {}
}
loadState();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo(0, 0);
}

function goHome() { showScreen('screen-home'); }

function selectAircraft(ac) {
  currentAC = ac;
  showScreen('screen-menu');
  renderMenu();
}

function goMenu() {
  showScreen('screen-menu');
  renderMenu();
}

function openChecklist(clId) {
  currentCL = clId;
  showScreen('screen-checklist');
  renderChecklist();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER MENU
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderMenu() {
  const ac = CHECKLISTS[currentAC];
  const title = document.getElementById('menu-title');
  title.textContent = ac.label;
  title.className = 'top-bar-title ' + (currentAC === 'B737' ? 'b737' : 'a320');

  const list = document.getElementById('menu-list');
  list.innerHTML = '';

  ac.checklists.forEach((cl, idx) => {
    const total = cl.items.length;
    const done = Object.values(state[currentAC][cl.id] || {}).filter(Boolean).length;
    const pct = total > 0 ? (done / total * 100) : 0;
    const completed = done === total;

    const el = document.createElement('div');
    el.className = 'menu-item' + (completed ? ' completed' : '');
    el.onclick = () => openChecklist(cl.id);
    el.innerHTML = `
      <div class="menu-item-num">${String(idx+1).padStart(2,'0')}</div>
      <div class="menu-item-name">${cl.name}</div>
      <div class="menu-item-progress">${done}/${total}</div>
      <div class="menu-item-arrow">â–¶</div>
      <div class="check-badge">âœ…</div>
      <div class="menu-item-bar" style="width:${pct}%"></div>
    `;
    list.appendChild(el);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER CHECKLIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderChecklist() {
  const ac = CHECKLISTS[currentAC];
  const cl = ac.checklists.find(c => c.id === currentCL);

  document.getElementById('cl-title').textContent = cl.name;

  const list = document.getElementById('cl-list');
  list.innerHTML = '';

  cl.items.forEach((item, idx) => {
    const checked = !!(state[currentAC][cl.id][idx]);
    const el = document.createElement('div');
    el.className = 'cl-item' + (checked ? ' checked' : '');
    el.onclick = () => toggleItem(idx, el);
    el.innerHTML = `
      <div class="cl-checkbox">${checked ? 'âœ“' : ''}</div>
      <div class="cl-item-content">
        <div class="cl-item-action">${item.action}</div>
        <div class="cl-item-value">${item.value}</div>
      </div>
    `;
    list.appendChild(el);
  });

  const checklists = CHECKLISTS[currentAC].checklists;
  const clIndex = checklists.findIndex(c => c.id === currentCL);
  const isLast = clIndex === checklists.length - 1;

  const btnRow = document.createElement('div');
  btnRow.className = 'cl-btn-row';

  const backBtn = document.createElement('button');
  backBtn.className = 'cl-back-btn';
  if (clIndex === 0) {
    backBtn.textContent = 'â—€  Back';
    backBtn.onclick = goMenu;
  } else {
    const prevCl = checklists[clIndex - 1];
    backBtn.textContent = 'â—€  ' + prevCl.name;
    backBtn.onclick = function() { openChecklist(prevCl.id); };
  }
  btnRow.appendChild(backBtn);

  if (isLast) {
    const resetBtn = document.createElement('button');
    resetBtn.className = 'cl-next-btn cl-reset-color';
    resetBtn.textContent = 'âŸ³  Reset All';
    resetBtn.onclick = function() { resetAll(); };
    btnRow.appendChild(resetBtn);
  } else {
    const nextBtn = document.createElement('button');
    const nextCl = checklists[clIndex + 1];
    nextBtn.id = 'next-checklist-btn';
    nextBtn.className = 'cl-next-btn cl-btn-disabled';
    nextBtn.textContent = nextCl.name + '  â–¶';
    nextBtn.onclick = function() { if (!nextBtn.classList.contains('cl-btn-disabled')) openChecklist(nextCl.id); };
    btnRow.appendChild(nextBtn);
  }

  list.appendChild(btnRow);

  updateClFooter(cl);
}

function toggleItem(idx, el) {
  const cl = CHECKLISTS[currentAC].checklists.find(c => c.id === currentCL);
  state[currentAC][currentCL][idx] = !state[currentAC][currentCL][idx];
  saveState();

  const checked = state[currentAC][currentCL][idx];
  el.classList.toggle('checked', checked);
  el.querySelector('.cl-checkbox').textContent = checked ? 'âœ“' : '';

  if (checked) {
    el.classList.add('just-checked');
    setTimeout(() => el.classList.remove('just-checked'), 600);
  }

  updateClFooter(cl);
}

function updateClFooter(cl) {
  const total = cl.items.length;
  const done = Object.values(state[currentAC][cl.id] || {}).filter(Boolean).length;
  const pct = total > 0 ? (done / total * 100) : 0;
  const allDone = done === total;

  document.getElementById('cl-subtitle').textContent = `${currentAC} Â· ${done} / ${total} COMPLETE`;
  document.getElementById('cl-footer-left').textContent = `${done} / ${total} ITEMS`;
  document.getElementById('cl-footer-right').textContent = allDone ? 'âœ“ COMPLETE' : 'IN PROGRESS';
  document.getElementById('cl-progress-bar').style.width = pct + '%';

  const banner = document.getElementById('all-done-banner');
  banner.classList.toggle('show', allDone);

  const nextBtn = document.getElementById('next-checklist-btn');
  if (nextBtn) {
    nextBtn.classList.toggle('cl-btn-disabled', !allDone);
    if (allDone) {
      setTimeout(() => nextBtn.scrollIntoView({ behavior: 'smooth', block: 'end' }), 50);
    }
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RESET
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function resetAll() {
  if (!confirm(`Reset ALL ${currentAC} checklists?`)) return;
  for (const cl of CHECKLISTS[currentAC].checklists) {
    state[currentAC][cl.id] = {};
  }
  saveState();
  renderMenu();
}


// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// THEME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function applyTheme(dark) {
  document.documentElement.classList.toggle('dark', dark);
  const btn = document.getElementById('theme-toggle');
  if (btn) btn.textContent = dark ? 'â˜€ï¸ Light mode' : 'ğŸŒ™ Dark mode';
  document.querySelector('meta[name="theme-color"]').setAttribute('content', dark ? '#1a1a1a' : '#ffffff');
  try { localStorage.setItem('fc_theme', dark ? 'dark' : 'light'); } catch(e) {}
}

function toggleTheme() {
  applyTheme(!document.documentElement.classList.contains('dark'));
}

// Load saved theme on startup
(function() {
  try {
    const saved = localStorage.getItem('fc_theme');
    if (saved === 'dark') applyTheme(true);
  } catch(e) {}
})();

// (Service worker disabled for local file use)
</script>
</body>
</html>
